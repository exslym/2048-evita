function G(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();let o,m=0,l=4,i=4,y;const u=document.getElementById("board"),M=document.querySelector(".nextTarget"),P=document.querySelector(".currentScore"),O=document.querySelector(".record"),k=document.querySelector(".scoreRecord"),B=document.querySelector(".alert"),L=document.querySelector(".warning"),w=document.querySelector(".ok"),E=document.querySelector(".restart"),_=function(){localStorage.getItem("scoreRecord")||localStorage.setItem("scoreRecord",0),R(),v(),v(),f()};function R(){o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(let e=0;e<l;e++)for(let t=0;t<i;t++){let r=document.createElement("div");r.id=e.toString()+"-"+t.toString();let c=o[e][t];g(r,c),document.getElementById("board").append(r)}}function N(){Array.from(document.getElementById("board").children).forEach(e=>{e.remove()}),m=0}function f(){window.addEventListener("keyup",U,{once:!0}),u.classList.contains("inactive")||window.addEventListener("touchstart",x,{once:!0,passive:!1})}function U(e){S(e.key)}function S(e){switch(e){case"ArrowLeft":Y();break;case"ArrowRight":$();break;case"ArrowUp":K();break;case"ArrowDown":V();break;default:f();return}v(),document.querySelector(".score").innerText=m,f()}function x(e){e.preventDefault();let t=e.changedTouches[0],r=new Date;window.addEventListener("touchend",c=>{c.preventDefault();let n=c.changedTouches[0];if(new Date-r>1e3){f();return}let s=n.pageX-t.pageX,a=n.pageY-t.pageY;Math.abs(s)>=55?S(s>0?"ArrowRight":"ArrowLeft"):Math.abs(a)>=55&&S(a>0?"ArrowDown":"ArrowUp"),f()},{once:!0})}w&&w.addEventListener("click",e=>{e.preventDefault(),B.classList.add("hidden"),u.classList.remove("inactive"),window.addEventListener("touchstart",x,{once:!0,passive:!1})});function d(e){B.classList.remove("hidden"),u.classList.add("inactive"),P.innerText=e,M.innerText=e*2}let b=!0,I=!0,T=!0,C=!0,q=!0,D=!0;function X(e){e>0&&document.querySelector(".tile")&&document.querySelectorAll(".tile").forEach(t=>{+t.textContent!=0&&+t.textContent%1024===0&&(+t.textContent==1024&&b===!0?(d(+t.textContent),b=!1):+t.textContent==2048&&I===!0?(d(+t.textContent),I=!1):+t.textContent==4096&&T===!0?(d(+t.textContent),T=!1):+t.textContent==8192&&C===!0?(d(+t.textContent),C=!1):+t.textContent==16384&&q===!0?(d(+t.textContent),q=!1):+t.textContent==32768&&D===!0&&(d(+t.textContent),D=!1))})}function g(e,t){if(e.innerText="",e.classList.value="",e.classList.add("tile"),t>0){const r=100-Math.log2(t)*7;e.innerText=t.toString(),e.classList.add("colored"),e.style.setProperty("--bg-ligthness",`${r}%`),e.style.setProperty("--text-ligthness",`${r<50?90:10}%`),X(t)}}function A(e){return e.filter(t=>t!==0)}function p(e){e=A(e);for(let t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,m+=e[t]);for(e=A(e);e.length<i;)e.push(0);return e}function Y(){for(let e=0;e<l;e++){let t=o[e];t=p(t),o[e]=t;for(let r=0;r<i;r++){let c=document.getElementById(e.toString()+"-"+r.toString()),n=o[e][r];g(c,n)}}}function $(){for(let e=0;e<l;e++){let t=o[e];t.reverse(),t=p(t),o[e]=t.reverse();for(let r=0;r<i;r++){let c=document.getElementById(e.toString()+"-"+r.toString()),n=o[e][r];g(c,n)}}}function K(){for(let e=0;e<i;e++){let t=[o[0][e],o[1][e],o[2][e],o[3][e]];t=p(t);for(let r=0;r<l;r++){o[r][e]=t[r];let c=document.getElementById(r.toString()+"-"+e.toString()),n=o[r][e];g(c,n)}}}function V(){for(let e=0;e<i;e++){let t=[o[0][e],o[1][e],o[2][e],o[3][e]];t.reverse(),t=p(t),t.reverse();for(let r=0;r<l;r++){o[r][e]=t[r];let c=document.getElementById(r.toString()+"-"+e.toString()),n=o[r][e];g(c,n)}}}let h=0;function F(){for(let e=0;e<l;e++)for(let t=0;t<i;t++)if(o[e][t]===0)return h=0,!0;return h+=1,h===1&&(y=m,L.classList.remove("hidden"),u.classList.add("inactive"),E&&E.addEventListener("click",e=>{e.preventDefault(),+localStorage.getItem("scoreRecord")<=y&&localStorage.setItem("scoreRecord",y),k.innerText=`${localStorage.getItem("scoreRecord")}`,L.classList.add("hidden"),u.classList.remove("inactive"),window.addEventListener("touchstart",x,{once:!0,passive:!1}),O.classList.remove("hidden"),h=0,document.querySelector(".score").innerText="0",N(),R()})),!1}function v(){if(!F())return;let e=!1;for(;!e;){let t=Math.floor(Math.random()*l),r=Math.floor(Math.random()*i);if(o[t][r]===0){o[t][r]=2;let c=document.getElementById(t.toString()+"-"+r.toString());c.innerText="2",c.classList.add("colored"),c.style.setProperty("--bg-ligthness","90%"),c.style.setProperty("--text-ligthness","10%"),e=!0}}}window.addEventListener("DOMContentLoaded",()=>{_()});export{G as __vite_legacy_guard};
